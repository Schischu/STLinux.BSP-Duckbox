#define VFD_MAJOR			147

#define SCP_TXD_BIT			6
#define SCP_SCK_BIT			8
#define SCP_ENABLE_BIT		5
#define VFD_PORT			0
#define SCP_DATA			3
#define SCP_CLK			4
#define SCP_CS			5

#define DCRAM_COMMAND		(0x20 & 0xf0)
#define CGRAM_COMMAND		(0x40 & 0xf0)
#define ADRAM_COMMAND		(0x60 & 0xf0)
#define NUM_DIGIT_COMMAND		(0xE0 & 0xf0)
#define LIGHT_ON_COMMAND		(0xE8 & 0xFC)
#define DIMMING_COMMAND		(0xE4 & 0xFC)
#define GRAY_LEVEL_DATA_COMMAND	(0xA0 & 0xF8)
#define GRAY_LEVEL_ON_COMMAND	(0xC0 & 0xE0)

#define PIO_PORT_SIZE		0x1000
#define PIO_BASE			0xb8020000  
#define STPIO_SET_OFFSET		0x4
#define STPIO_CLEAR_OFFSET		0x8   
#define STPIO_POUT_OFFSET		0x00

#define STPIO_SET_PIN(PIO_ADDR, PIN, V) writel(1<<PIN, PIO_ADDR + STPIO_POUT_OFFSET + ((V)? STPIO_SET_OFFSET : STPIO_CLEAR_OFFSET))
#define PIO_PORT(n) (((n)*PIO_PORT_SIZE) + PIO_BASE)

#define VFDDCRAMWRITE		0xc0425a00
#define VFDBRIGHTNESS		0xc0425a03
#define VFDDISPLAYWRITEONOFF	0xc0425a05
#define VFDDRIVERINIT		0xc0425a08
#define VFDICONDISPLAYONOFF		0xc0425a0a

//noch unbekannte ioctls
//0xc0425a04 = 0x10=Byte1
//0x40425a01 = 0x00=Byte1

struct vfd_ioctl_data {
  unsigned char address;
  unsigned char data[64];
  unsigned char length;
};

struct __vfd_scp {
    __u8 tr_rp_ctrl;
    __u8 rp_data;
    __u8 tr_data;
    __u8 start_tr;
    __u8 status;
    __u8 reserved;	
    __u8 clk_div;
};

struct __vfd_scp* vfd_scp_ctrl=NULL;

#define SCP_TXD_CTRL        (vfd_scp_ctrl->tr_rp_ctrl)
#define SCP_TXD_DATA        (vfd_scp_ctrl->tr_data)
#define SCP_TXD_START       (vfd_scp_ctrl->start_tr)
#define SCP_STATUS          (vfd_scp_ctrl->status)

int SCP_PORT = 0;

unsigned char *ROM_Char_Table=NULL;

unsigned char ROM_KATHREIN[256] =
{
        0x2e,//0x00, icon play
        0x8f,//0x01, icon stop
        0xe4,//0x02, icon pause
        0xdd,//0x03, icon ff
        0xdc,//0x04, icon rewind
        0x10,//0x05, 
        0x10,//0x06, 
        0x10,//0x07, 
        0x10,//0x08, 
        0x10,//0x09, 
        0x10,//0x0a, 
        0x10,//0x0b, 
        0x10,//0x0c, 
        0x10,//0x0d, 
        0x10,//0x0e, 
        0x10,//0x0f, 

        0x10,//0x10,,reserved  
        0x11,//0x11,,reserved   
        0x12,//0x12,,reserved  
        0x13,//0x13,,reserved  
        0x14,//0x14,,reserved  
        0x15,//0x15,,reserved  
        0x16,//0x16,,reserved  
        0x17,//0x17,,reserved  
        0x18,//0x18,,reserved  
        0x19,//0x19,,reserved  
        0x1a,//0x1a,,reserved   
        0x1b,//0x1b,,reserved  
        0x1c,//0x1c,,reservedr 
        0x10,//0x1d,,reserved  
        0x10,//0x1e,,reserved  
        0x10,//0x1f, , reserved

        0x20,//0x20, <space>
        0x21,//0x21,!
        0x22,//0x22,"
        0x23,//0x23,#
        0x24,//0x24,$
        0x25,//0x25,%
        0x26,//0x26,&
        0x27,//0x27,'
        0x28,//0x28,(
        0x29,//0x29,)
        0x2a,//0x2a,*
        0x2b,//0x2b,+
        0x2c,//0x2c,,
        0x2d,//0x2d,-
        0x2e,//0x2e,.
        0x2f,//0x2f, /

        0x30,//0x30,0   
        0x31,//0x31,1    
        0x32,//0x32,2    
        0x33,//0x33,3    
        0x34,//0x34,4    
        0x35,//0x35,5    
        0x36,//0x36,6    
        0x37,//0x37,7    
        0x38,//0x38,8    
        0x39,//0x39,9    
        0x3a,//0x3a,:    
        0x3b,//0x3b,;    
        0x3c,//0x3c,<    
        0x3d,//0x3d,=    
        0x3e,//0x3e,>    
        0x3f,//0x3f, ?  

        0x40,//0x40,@ 
        0x41,//0x41,A 
        0x42,//0x42,B 
        0x43,//0x43,C 
        0x44,//0x44,D 
        0x45,//0x45,E 
        0x46,//0x46,F 
        0x47,//0x47,G 
        0x48,//0x48,H 
        0x49,//0x49,I 
        0x4a,//0x4a,J 
        0x4b,//0x4b,K 
        0x4c,//0x4c,L
        0x4d,//0x4d,M 
        0x4e,//0x4e,N 
        0x4f,//0x4f,O _

        0x50,//0x50,P  
        0x51,//0x51,Q  
        0x52,//0x52,R  
        0x53,//0x53,S  
        0x54,//0x54,T  
        0x55,//0x55,U  
        0x56,//0x56,V  f
        0x57,//0x57,W  
        0x58,//0x58,X  
        0x59,//0x59,Y  i
        0x5a,//0x5a,Z  j
        0x5b,//0x5b,[  
        0x5c,//0x5c,  l
        0x5d,//0x5d,]  
        0x5e,//0x5e,^  
        0x5f,//0x5f,  

        0x60,//0x60,`  
        0x61,//0x61,a  
        0x62,//0x62,b  r
        0x63,//0x63,c  
        0x64,//0x64,d  t
        0x65,//0x65,e  
        0x66,//0x66,  
        0x67,//0x67,g  
        0x68,//0x68,h  
        0x69,//0x69,  
        0x6a,//0x6a,  
        0x6b,//0x6b,k  
        0x6c,//0x6c,  |
        0x6d,//0x6d,m  
        0x6e,//0x6e,n  
        0x6f,//0x6f, o 

        0x70,//0x70,p  
        0x71,//0x71,q  
        0x72,//0x72,  
        0x73,//0x73,s  
        0x74,//0x74,  
        0x75,//0x75,u  
        0x76,//0x76,v  
        0x77,//0x77,w  
        0x78,//0x78,x  
        0x79,//0x79,y  
        0x7a,//0x7a,z  
        0x7b,//0x7b,{  
        0x7c,//0x7c,  
        0x7d,//0x7d,}  
        0x7e,//0x7e,~  
        0x7f,//0x7f, <DEL>--> all light on

        0x84,//0x80,a -umulaut  
        0x94,//0x81,o -umulaut  
        0x81,//0x82,u -umulaut  
        0x8e,//0x83,A -umulaut  
        0x99,//0x84,O -umulaut  
        0x9a,//0x85,U -umulaut  
        0xb1,//0x86,©¬- estset  
        0x10,//0x87,reserved  
        0x10,//0x88,reserved   
        0x10,//0x89,reserved  
        0x10,//0x8a,reserved  
        0x10,//0x8b,reserved  
        0x10,//0x8c,reserved  
        0x10,//0x8d,reserved  
        0x10,//0x8e,reserved  
        0x10,//0x8f,  reserved 

        0x10,//0x90,reserved 
        0x10,//0x91,reserved  
        0x10,//0x92,reserved 
        0x10,//0x93,reserved 
        0x10,//0x94,reserved 
        0x10,//0x95,reserved 
        0x10,//0x96,reserved 
        0x10,//0x97,reserved 
        0x10,//0x98,reserved 
        0x10,//0x99,reserved 
        0x10,//0x9a,reserved  
        0x10,//0x9b,reserved 
        0x10,//0x9c,reservedr
        0x10,//0x9d,reserved 
        0x10,//0x9e,reserved 
        0x10,//0x9f, reserved

        0x10,//0xa0,reserved  
        0x10,//0xa1,reserved   
        0x10,//0xa2,reserved   
        0x10,//0xa3,reserved   
        0x10,//0xa4,reserved   
        0x10,//0xa5,reserved   
        0x10,//0xa6,reserved   
        0x10,//0xa7,reserved   
        0x10,//0xa8,reserved   
        0x10,//0xa9,reserved   
        0x10,//0xaa,reserved   
        0x10,//0xab,reserved   
        0x10,//0xac,eserved   
        0x10,//0xad,reserved   
        0x10,//0xae,reserved   
        0x10,//0xaf, reserved 

        0x10,//0xb0, reserved 
        0x10,//0xb1, reserved 
        0x10,//0xb2, reserved 
        0x10,//0xb3, reserved 
        0x10,//0xb4, reserved 
        0x10,//0xb5, reserved 
        0x10,//0xb6, reserved 
        0x10,//0xb7, reserved 
        0x10,//0xb8, reserved 
        0x10,//0xb9, reserved 
        0x10,//0xba, reserved 
        0x10,//0xbb, reserved 
        0x10,//0xbc,reserved 
        0x10,//0xbd, reserved 
        0x10,//0xbe, reserved 
        0x10,//0xbf, reserved

        0x10,//0xc0, reserved  
        0x10,//0xc1, reserved  
        0x10,//0xc2, reserved  
        0x10,//0xc3, reserved  
        0x10,//0xc4, reserved  
        0x10,//0xc5, reserved  
        0x10,//0xc6, reserved  
        0x10,//0xc7, reserved  
        0x10,//0xc8, reserved  
        0x10,//0xc9, reserved  
        0x10,//0xca, reserved  
        0x10,//0xcb, reserved  
        0x10,//0xcc, reserved 
        0x10,//0xcd, reserved  
        0x10,//0xce, reserved  
        0x10,//0xcf, reserved 

        0x10,//0xd0, reserved  
        0x10,//0xd1, reserved  
        0x10,//0xd2, reserved  
        0x10,//0xd3, reserved  
        0x10,//0xd4, reserved  
        0x10,//0xd5, reserved  
        0x10,//0xd6, reserved  
        0x10,//0xd7, reserved  
        0x10,//0xd8, reserved  
        0x10,//0xd9, reserved  
        0x10,//0xda, reserved  
        0x10,//0xdb, reserved  
        0x10,//0xdc,reserved  
        0x10,//0xdd, reserved  
        0x10,//0xde, reserved  
        0x10,//0xdf, reserved 

        0x10,//0xe0, reserved  
        0x10,//0xe1, reserved  
        0x10,//0xe2, reserved  
        0x10,//0xe3, reserved  
        0x10,//0xe4, reserved  
        0x10,//0xe5, reserved  
        0x10,//0xe6, reserved  
        0x10,//0xe7, reserved  
        0x10,//0xe8, reserved  
        0x10,//0xe9, reserved  
        0x10,//0xea, reserved  
        0x10,//0xeb, reserved  
        0x10,//0xec,reserved  
        0x10,//0xed, reserved  
        0x10,//0xee, reserved  
        0x10,//0xef, reserved 

        0x10,//0xf0,  reserved
        0x10,//0xf1,  reserved
        0x10,//0xf2,  reserved
        0x10,//0xf3,  reserved
        0x10,//0xf4,  reserved
        0x10,//0xf5,  reserved
        0x10,//0xf6,  reserved
        0x10,//0xf7,  reserved
        0x10,//0xf8,  reserved
        0x10,//0xf9,  reserved
        0x10,//0xfa,  reserved
        0x10,//0xfb,  reserved
        0x10,//0xfc, reserved
        0x10,//0xfd,  reserved
        0x10,//0xfe,  reserved
        0x10 //0xff, reservedr
};
